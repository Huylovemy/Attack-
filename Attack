-- Biến điều khiển
_G.FastAttack = false

-- 1. TẠO UI SIÊU NHỎ GỌN (Không chặn cảm ứng)
local ScreenGui = Instance.new("ScreenGui")
local ToggleButton = Instance.new("TextButton")
local UICorner = Instance.new("UICorner")

ScreenGui.Name = "SafeM1_Gui"
ScreenGui.Parent = game.CoreGui
ScreenGui.IgnoreGuiInset = true -- Giúp UI không đẩy các thành phần khác

ToggleButton.Name = "M1Button"
ToggleButton.Parent = ScreenGui
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ToggleButton.BackgroundTransparency = 0.4
ToggleButton.Position = UDim2.new(0.8, 0, 0.2, 0) -- Đặt bên phải màn hình
ToggleButton.Size = UDim2.new(0, 60, 0, 60)
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.Text = "M1: OFF"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 12
ToggleButton.Active = true
ToggleButton.Draggable = true -- Bạn có thể kéo đi chỗ khác nếu vướng

UICorner.CornerRadius = UDim.new(0, 30) -- Nút hình tròn
UICorner.Parent = ToggleButton

-- 2. LOGIC BẬT/TẮT
ToggleButton.MouseButton1Click:Connect(function()
    _G.FastAttack = not _G.FastAttack
    if _G.FastAttack then
        ToggleButton.Text = "M1: ON"
        ToggleButton.TextColor3 = Color3.fromRGB(0, 255, 0)
    else
        ToggleButton.Text = "M1: OFF"
        ToggleButton.TextColor3 = Color3.fromRGB(255, 0, 0)
    end
end)

-- 3. LOGIC TẤN CÔNG (Dùng VirtualInputManager)
local VIM = game:GetService("VirtualInputManager")
task.spawn(function()
    while task.wait() do
        if _G.FastAttack then
            pcall(function()
                -- Tấn công cực nhanh
                VIM:SendMouseButtonEvent(0, 0, 0, true, game, 0)
                VIM:SendMouseButtonEvent(0, 0, 0, false, game, 0)
            end)
        end
    end
end)
